%div{ data: { controller: 'editor',
              'editor-filled-class': 'file-field-filled' } }
  = form_for @paste, html: { 'data-action': 'editor#submit' } do |f|
    - @paste.errors.full_messages.each do |message|
      .alert.alert-danger
        = message

    .form-floating.mb-3
      - author_attrs = { placeholder: :author, class: 'form-control' }
      - author_attrs[:value] = current_user.username if user_signed_in?
      = f.text_field :author, author_attrs
      = f.label :author, class: 'form-label'
    .form-floating.mb-3
      :ruby
        title_attrs = { placeholder: :title, class: 'form-control' }
        title_attrs[:value] = if user_signed_in?
                                t(:user_paste, user: current_user.username)
                              else
                                t(:anonymous_paste)
                              end
      = f.text_field :title, title_attrs
      = f.label :title, class: 'form-label'
    .border.rounded.mb-3{ 'data-action': 'keydown->editor#hideFile' }
      = f.text_area :code, placeholder: :contents_of_the_paste,
                    class: 'form-control', 'data-editor-target': 'textarea'
    .input-group.mb-3
      = f.file_field :content, class: 'form-control',
                     data: { 'editor-target': 'file',
                             action: 'editor#hideText' }
      #file-remove-button
        %a.btn.btn-secondary.border{ data: { 'editor-target': 'clearFileButton',
                                             action: 'editor#clearFile' } }
          Clear
    .d-flex.justify-content-between.align-items-center
      .form-check
        = f.check_box :private, class: 'form-check-input'
        = f.label :private, class: 'form-check-label'
      .d-flex.justify-content-between
        .form-floating.ms-1
          = f.select :remove_after, Paste::PERIODS, { selected: 1.day },
                                                   { class: 'form-select' }
          = f.label :remove_after, class: 'form-label'
        = f.submit t(:save), class: 'btn btn-primary btn-lg ms-2'
